<!DOCTYPE html>
<html>

<head>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <title>geoFlow</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="//code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
</head>


<body>
    <div class="wrapper" id="cosmos">
        <h1 style="margin:auto;text-align:center">Countries and regions where UNDP works with Governments and Civil Society Organisations to implement Global Fund grants</h1>
        <div class="intro">

        </div>
        <h2 class="subtitle">&nbsp;</h2>
        <div id="world" class="world-wrapper">
                    <!--div id="info-box">
                        <div class="rad">?</div>
                        <div class="line"></div>
                        <div class="box">
                            <h4>How to use the globe:</h4>
                            <div>[click the ocean to spin the globe]</div>
                            <div>[click a highlighted country to see its results]</div>
                            <div>[drag to stop spinning]</div>
                            <div>[click on the legend to toggle visible countries]</div>
                        </div>
                    </div-->
            <div class="controls-container">
                <div class="selectors-container" style="position: relative">
                        <div class="select-dis n" style="position: absolute;top: -38px;width: 446px;left: 47px;">
                                <span style="display: inline;position: relative;top: -52px;">Please select a disease to highlight.</span>
                                <img width="40px" src="data:image/png;base64,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" style="display: inline;transform:rotateY(180deg)">                    
                        </div>                    
                    <div class="dis-selector">
                        <input type="radio" id="hiv" name="radio" />
                        <label for="hiv"><span></span>HIV</label>
                    </div>

                    <div class="dis-selector">
                        <input type="radio" id="ma" name="radio" />
                        <label for="ma"><span></span>Malaria</label>
                    </div>
                    <div class="dis-selector">
                        <input type="radio" id="tb" name="radio" />
                        <label for="tb"><span></span>Tuberculosis</label>
                    </div>
                </div>
                <hr class="divider">
                <div style="flex-grow: 1;">
                <div class="dis-result hiv-results">
                    <ul>
                        <li>
                            <b>2.1 million people</b> currently on HIV treatment (2017)
                            <hr class="divider">
                        </li>
                        
                        <li>
                            <b>41 million people</b> received HIV counselling and testing
                            <hr class="divider">
                        </li>

                        <li>
                            <b>1 out of 6 people</b> in Africa currently receiving HIV treatment
                            <hr class="divider">
                        </li>
                        <li>
                            <b>75% reduction in AIDS</b> related deaths in Zimbabwe
                            <hr class="divider">
                        </li>
                    </ul>
                    <a class="globalfootercard globalfootercard--blue" href="#" onclick="javascript:startTour('HIV')">View HIV Country Results</a>
                </div>
                <div class="dis-result ma-results">
                    <ul>
                        <li>
                                <b>67 million cases</b> of malaria treated
                            <hr class="divider">
                        </li>
                        <li>
                                <b>9 countries</b> have achieved 100% coverage with antimalarial drugs
                            <hr class="divider">
                        </li>
                        <li>
                                <b>57 million bed nets</b> distributed
                            <hr class="divider">
                        </li>
                    </ul>
                    <a class="globalfootercard globalfootercard--blue" href="#" onclick="javascript:startTour('MA')">View MALARIA Country Results</a>
                </div>
                <div class="dis-result tb-results">
                    <ul>
                        <li>
                                <b>850,000 cases</b> of TB detected and put on treatment
                            <hr class="divider">
                        </li>
                        <li>
                            In <b>12 countries</b> the case detection rate exceeds the global target of 70%
                            <hr class="divider">
                        </li>
                        <li>
                            <b>8 countries</b> have seen TB incidence decrease by a third
                            <hr class="divider">
                        </li>
                    </ul>
                    <a class="globalfootercard globalfootercard--blue" onclick="javascript:startTour('TB')" href="#">View TB Country Results</a>
                </div>
                </div>
                <div style="text-align:center;">
                    <hr class="divider">
                    <button class="plain-button" id="reset">Reset Globe</button>
                </div>
                
            </div>
            <div class="svg-wrapper">
                                         
                <div class="legend">
                    <div class="legend-item active-grant"><span></span>Active Grant</div>
                    <div class="legend-item active-reg-grant"><span></span>Active Regional Grant</div>
                    <div class="legend-item inactive-grant"><span></span>Inactive Grant</div>
                </div>
                <h3 class="country-name-svg n"></h3>
                <div class="scroll"><a href="#countryData"><span></span>Scroll to see results</a></div>
            </div>
        </div>
        <div class="country-data n" id="countryData">
        </div>
        <div class="sankey-diag" style="margin-top: 100px;">
            <svg id="svgSankey" width="1024" height="1000"></svg>
        </div>
    </div>

    <script src="//d3js.org/d3.v4.min.js"></script>
    <script src="//d3js.org/d3-selection-multi.v1.min.js"></script>
    <script src="//d3js.org/queue.v1.min.js"></script>
    <script src="/js/globe.js"></script>
    <!--script src="//unpkg.com/d3-sankey@0.7.1/build/d3-sankey.min.js"></script>
    <script src="js/countries-sankey.js"></script-->
    <script>
        window.Promise || document.write('<script src="//unpkg.com/es6-promise@3.2.1/dist/es6-promise.min.js"><\/script>');

            $('.rad').on('mouseenter mouseleave', function () {
  $('.box, .line').toggleClass('open');
});
        var regional_grants = {
            "ARGH": {
                "countries": ["BWA", "CIV", "KEN", "MWI", "NGA", "SEN", "SYC", "TZA", "UGA", "ZMB"],
                "centroid": {}
            },
            "CCRG": {
                "countries": ["BLZ", "CUB", "DOM", "GUY", "HTI", "JAM", "SUR", "TTO"],
                "centroid": {}
            },
            "MCSA": {
                "countries": ["AFG", "BGD", "BTN", "IND", "NPL", "PAK", "LKA"],
                "centroid": {}
            },
            "MCWP": {
                "countries": ["COK", "KIR", "MHL", "FSM", "NRU", "NIU", "PLW", "WSM", "TON", "TUV", "VUT"],
                "centroid": {}
            }
        }
        var country_names = {};
        var id_to_names = {};
        var data_per_country = {};
        var data_per_disease = {};

        var touring = false;
        var spinning = false;
        var disease = undefined;

        var numberFormat = d3.format(",");

        var globeOptions = {
            width: 775,
            height: 600,
            disease: undefined,
            events: {
                landMouseOver: landMouseOver,
                landMouseOut: landMouseOut,
                landMouseMove: landMouseMove,
                landMouseClick: landMouseClick

            },
            globeLoaded: GlobeLoaded

        };

        var globe = globe(globeOptions);

        function changeDisease(dis) {
            hideCountryInfo();
            globe.changeFocus(undefined);

            if (touring) {
                globe.tour(false);
            }
            if (!spinning) {
                globe.spin();
            }

            if(dis){
                d3.select('#world').classed('world-wrapper', false);
                disease = dis;
                d3.select(".country-name").html("");
                d3.select(".country-status").html("");
                d3.selectAll(".indicator").html("").remove();
                $(".select-dis").css("display", "none");
            }
            else{
                d3.select('#world').classed('world-wrapper', true);
                $(".select-dis").css("display", "block");
            }
            
            updateLegend();
        }

        d3.select("#hiv").on("change", function() {
            d3.select('.subtitle').text('Countries where we work on HIV (as of November 2017)');
            d3.select("#world").classed("hiv-world", !d3.select("#world").classed("hiv-world"));
            d3.select("#world").classed("ma-world", false);
            d3.select("#world").classed("tb-world", false);
            d3.select(".hiv-results").styles({
                "display": "block"
            });
            d3.select(".ma-results").styles({
                "display": "none"
            });
            d3.select(".tb-results").styles({
                "display": "none"
            });
            changeDisease("HIV");
        });

        d3.select("#ma").on("change", function() {
            d3.select('.subtitle').text('Countries where we work on Malaria (as of November 2017)');
            d3.select("#world").classed("ma-world", !d3.select("#world").classed("ma-world"));
            d3.select("#world").classed("hiv-world", false);
            d3.select("#world").classed("tb-world", false);
            d3.select(".hiv-results").styles({
                "display": "none"
            });
            d3.select(".ma-results").styles({
                "display": "block"
            });
            d3.select(".tb-results").styles({
                "display": "none"
            });
            changeDisease("MA");
        });

        d3.select("#tb").on("change", function() {
            d3.select('.subtitle').text('Countries where we work on Tuberculosis (as of November 2017)');
            d3.select("#world").classed("tb-world", !d3.select("#world").classed("tb-world"));
            d3.select("#world").classed("ma-world", false);
            d3.select("#world").classed("hiv-world", false);
            d3.select(".hiv-results").styles({
                "display": "none"
            });
            d3.select(".ma-results").styles({
                "display": "none"
            });
            d3.select(".tb-results").styles({
                "display": "block"
            });
            changeDisease("TB");
        });

        $("#reset").on("click", function() {
            disease = undefined;
            d3.select('.subtitle').html("&nbsp;");
            d3.select("#world").classed("tb-world", false);
            d3.select("#world").classed("ma-world", false);
            d3.select("#world").classed("hiv-world", false);
            d3.select(".hiv-results").styles({
                "display": "none"
            });
            d3.select(".ma-results").styles({
                "display": "none"
            });
            d3.select(".tb-results").styles({
                "display": "none"
            });
            $('.dis-selector input[type="radio"]').attr('checked', false);
            
            changeDisease(false);
        });


        var landTooltip = d3.select("body").append("div").attr("class", "landTooltip");
        var current_focus = undefined;

        function landMouseOver(d) {
            if (d.properties.name) {
                landTooltip.text(d.properties.name)
                    .styles({
                        "left": (d3.event.pageX + 7) + "px",
                        "top": (d3.event.pageY - 15) + "px",
                        "display": "block",
                        "opacity": 1,
                    })
            }
        }

        function landMouseMove(d) {
            landTooltip
                .styles({
                    "left": (d3.event.pageX + 7) + "px",
                    "top": (d3.event.pageY - 15) + "px",
                })
        }

        function landMouseOut(d) {
            landTooltip
                .styles({
                    "opacity": 0,
                    "display": "none",
                })
        }

        function landMouseClick(d) {

            var new_focus = globe.current_focus == d.id ? undefined : d.id;

            /*if (disease != undefined && !data_per_disease[disease][new_focus] || (disease != undefined && countryInGrant(new_focus) && !data_per_disease[disease][countryInGrant(new_focus)])) {
                return;
            }*/

            if (new_focus && !data_per_country[new_focus] && countryInGrant(new_focus)) {
                globe.tour(false);
                globe.spin(false);
                globe.bounce2(countryInGrant(new_focus), "grant");
            }

            if (data_per_country[new_focus] /* && disease && data_per_disease[disease][new_focus]*/ ) {
                globe.tour(false);
                globe.spin(false);
                globe.bounce2(d.properties.name);
            }
        }

        function hideCountryInfo() {
            d3.select(".country-data").classed("shown", false);
            d3.select(".country-name-svg").classed("shown", false);
            d3.selectAll(".clabel").classed("shown", true);
            $(".scroll").hide();
        }

        function showCountryInfo(country_id) {
            if (!country_id) {
                return;
            }
            $(".scroll").show();
            $(".country-data").empty();

            d3.select(".country-name-svg").classed("shown", true);

            d3.select(".country-data").classed("shown", true);
            d3.selectAll(".clabel").classed("shown", false);

            var isGrant = country_id.length == 4;
            var country = id_to_names[country_id];
            var data = data_per_country[country_id];

            var lines = [];
            lines.push("<h3>"+ country +"</h3>");
            lines.push("<hr class='dotted'>");
            if(isGrant){
                var countriesInGrant = [];
                regional_grants[country_id].countries.forEach(function(c_id){
                    countriesInGrant.push(id_to_names[c_id]);
                });
                lines.push("<div class='grant-counties'><span style='font-weight:bold;'>Countries in grant: </span><span style='font-size:12px;text-style:italic;'>" + countriesInGrant.join(", ") + "</span></div>");
                lines.push("<hr class='dotted'>");
            }

            var link;
            lines.push("<table>")
                lines.push("<tr>")
            Object.keys(data).forEach(function(dis){
                data[dis].forEach(function(ind){
                    var act = ind.Status == "Active";
                    var status_str = act ? "<span class='cs-Active'>Active Grant</span>" :  "<span class='cs-Inactive'>Inactive Grant</span>";
                    var highlight_column = disease && ind.Disease == disease;
                    lines.push(highlight_column ? "<td class='highlight_column'>" : "<td>");
                    lines.push("<span class='dis-headline'>" + dis_to_str(ind.Disease) + " - <span>" + status_str);
                    lines.push("<hr>");
                    lines.push("<div class='indicator'><span class='ind-name'>" + ind.Indicator + ": </span><span class='ind-value'>" + ind.Value + "</span></div>");
                    lines.push("</td>")
                    if(ind.Link){
                        if(isGrant)
                        {
                            link = "<div style='margin:auto;width:20%;'><a target='_blank' class='globalfootercard globalfootercard--green' href='" + ind.Link + "'>Visit Regional Results Page</a></div>";
                        }
                        else{
                            link = "<div style='margin:auto;width:20%;'><a target='_blank' class='globalfootercard globalfootercard--green' href='" + ind.Link + "'>Visit Country Results Page</a></div>";
                        }
                    }
                });
            })
            lines.push("</tr>")
            lines.push("</table>")

            if(link){
                lines.push(link);
            }

            $(".country-data").append(lines.join(""));

            d3.select(".country-name-svg").html(country);
        }
        function dis_to_str(dis){
            if(dis == "HIV"){
                return "HIV/AIDS";
            }
            if(dis == "TB"){
                return "Tuberculosis";
            }
            if(dis == "MA"){
                return "Malaria";
            }
        }

        function countryInGrant(country_id) {
            if (regional_grants["ARGH"].countries.indexOf(country_id) >= 0) {
                return "ARGH";
            }
            if (regional_grants["CCRG"].countries.indexOf(country_id) >= 0) {
                return "CCRG";
            }
            if (regional_grants["MCWP"].countries.indexOf(country_id) >= 0) {
                return "MCWP";
            }
            if (regional_grants["MCSA"].countries.indexOf(country_id) >= 0) {
                return "MCSA";
            }
        }

        function updateLegend() {
            $(".off-legend").removeClass("off-legend");
            $(".country-off").removeClass("country-off");

            if (disease == "HIV") {
                $(".active-grant span").css("background-color", "#cb181d");
                $(".inactive-grant span").css("background-color", "#fee5d9");
                $(".active-reg-grant span").css("background-color", "#fb6a4a");
                return;
            }
            if (disease == "MA") {
                $(".active-grant span").css("background-color", "#2171b5");
                $(".inactive-grant span").css("background-color", "#bdd7e7");
                $(".active-reg-grant span").css("background-color", "#6baed6");
                return;
            }
            if (disease == "TB") {
                $(".active-grant span").css("background-color", "#238b45");
                $(".inactive-grant span").css("background-color", "#bae4b3");
                $(".active-reg-grant span").css("background-color", "#74c476");
                return;
            } else {
                $(".active-grant span").css("background-color", "#6a51a3");
                $(".inactive-grant span").css("background-color", "#cbc9e2");
                $(".active-reg-grant span").css("background-color", "#9e9ac8");
                $(".legend-item.inactive-grant").addClass("off-legend");
                $(".InactiveCountry").addClass("country-off");
            }
        }

        function startTour(aDisease) {
            disease = undefined;
            globe.spin(false);
            globe.changeFocus(undefined);

            globe.tour(false).then(function() {
                disease = aDisease;
                globe.tour(true, disease).then(function() {
                    globe.rotate2().then(function() {
                        globe.changeFocus(undefined);
                    });
                });
            });
        }

        function GlobeLoaded() {
            $(".ActiveCountry.InactiveCountry").removeClass("InactiveCountry");
            updateLegend();
            //$(".InactiveCountry").toggleClass("country-off");
            $(".legend-item.inactive-grant").addClass("off-legend");
            $(".legend-item").click(function() {
                
                if($(this).hasClass("active-grant") && ($(".active-reg-grant").hasClass("off-legend") === $(".active-grant").hasClass("off-legend"))){
                    $(".active-reg-grant").toggleClass("off-legend");
                }
                $(this).toggleClass("off-legend");
                
                if($(this).hasClass("active-reg-grant")){
                        disease ? $(".reg-grant-" + disease + "-active").toggleClass("country-off") : $(".reg-grant-active").toggleClass("country-off");
                        return;
                }
                var act = $(this).hasClass("active-grant");
                if (disease) {
                    act ? $("." + disease + "-active").toggleClass("country-off") : $("." + disease + "-inactive").not("." + disease + "-active").toggleClass("country-off");
                    //act ? $(".ActiveCountry").toggleClass("country-off") : $(".InactiveCountry").toggleClass("country-off");
                } else {
                    act ? $(".ActiveCountry").toggleClass("country-off") : $(".InactiveCountry").toggleClass("country-off");
                }

            });
        }


        function pairedColors() {
            return colors("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");
        }

        function colors(specifier) {
            var n = specifier.length / 6 | 0,
                colors = new Array(n),
                i = 0;
            while (i < n) colors[i] = "#" + specifier.slice(i * 6, ++i * 6);
            return colors;
        }
    </script>

</body>

</html>